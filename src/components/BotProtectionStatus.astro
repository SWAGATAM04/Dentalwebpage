---
// Component to show bot protection status (for admin/monitoring)
---

<div class="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
  <h3 class="text-lg font-bold text-gray-800 mb-4">Bot Protection Status</h3>
  
  <div id="protection-status" class="space-y-4">
    <div class="flex items-center justify-between p-3 bg-green-50 rounded-lg">
      <span class="text-sm font-medium text-green-800">reCAPTCHA v3</span>
      <span class="text-xs text-green-600" id="recaptcha-status">Active</span>
    </div>
    
    <div class="flex items-center justify-between p-3 bg-green-50 rounded-lg">
      <span class="text-sm font-medium text-green-800">Rate Limiting</span>
      <span class="text-xs text-green-600" id="rate-limit-status">Active</span>
    </div>
    
    <div class="flex items-center justify-between p-3 bg-green-50 rounded-lg">
      <span class="text-sm font-medium text-green-800">Bot Detection</span>
      <span class="text-xs text-green-600" id="bot-detection-status">Active</span>
    </div>
    
    <div class="flex items-center justify-between p-3 bg-green-50 rounded-lg">
      <span class="text-sm font-medium text-green-800">Honeypot Fields</span>
      <span class="text-xs text-green-600" id="honeypot-status">Active</span>
    </div>
  </div>

  <div class="mt-6 pt-4 border-t border-gray-200">
    <h4 class="text-sm font-medium text-gray-700 mb-2">Recent Activity</h4>
    <div id="recent-activity" class="text-xs text-gray-600">
      Loading...
    </div>
  </div>
</div>

<script>
  import { BotAnalytics, MonitoringDashboard } from '../utils/analytics';

  document.addEventListener('DOMContentLoaded', async () => {
    // Initialize monitoring
    BotAnalytics.initializeMonitoring();
    
    // Load recent activity
    try {
      const activity = await MonitoringDashboard.getRecentSuspiciousActivity();
      const activityDiv = document.getElementById('recent-activity');
      
      if (activity && activity.length > 0) {
        activityDiv.innerHTML = activity
          .slice(0, 5)
          .map(item => `<div class="mb-1">${item.type}: ${item.details || 'No details'}</div>`)
          .join('');
      } else {
        activityDiv.innerHTML = 'No recent suspicious activity detected.';
      }
    } catch (error) {
      console.error('Failed to load activity:', error);
      document.getElementById('recent-activity').innerHTML = 'Failed to load activity data.';
    }
  });
</script>